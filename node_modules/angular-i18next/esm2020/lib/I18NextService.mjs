import { Inject, Injectable, Optional } from '@angular/core';
import * as i18n from 'i18next';
import { I18NEXT_ERROR_HANDLING_STRATEGY, I18NEXT_INSTANCE } from './I18NEXT_TOKENS';
import { I18NextEvents } from './I18NextEvents';
import * as i0 from "@angular/core";
const i18nextGlobal = i18n.default;
export class I18NextService {
    constructor(errorHandlingStrategy, i18nextInstance) {
        this.errorHandlingStrategy = errorHandlingStrategy;
        this.events = new I18NextEvents();
        this.i18next = i18nextInstance ?? i18nextGlobal;
    }
    get language() {
        return this.i18next.language;
    }
    get languages() {
        return this.i18next.languages;
    }
    get options() {
        return this.i18next.options;
    }
    get modules() {
        return this.i18next.modules;
    }
    get services() {
        return this.i18next.services;
    }
    get store() {
        return this.i18next.store;
    }
    get resolvedLanguage() {
        return this.i18next.resolvedLanguage;
    }
    get isInitialized() {
        return this.i18next.isInitialized;
    }
    use(module) {
        this.i18next.use.call(this.i18next, module);
        return this;
    }
    init(options) {
        this.subscribeEvents();
        return new Promise((resolve, reject) => {
            this.i18next.init.call(this.i18next, Object.assign({}, options ?? {}), this.errorHandlingStrategy.handle(resolve, reject));
        });
    }
    t(key, optionsOrDefault, options) {
        const hasDefault = optionsOrDefault && typeof optionsOrDefault === 'string';
        if (hasDefault) {
            return this.i18next.t.call(this.i18next, key, optionsOrDefault, options);
        }
        else {
            return this.i18next.t.call(this.i18next, key, optionsOrDefault, undefined);
        }
    }
    format(value, format, lng) {
        return this.i18next.format.call(this.i18next, value, format, lng, {});
    }
    exists(key, options) {
        return this.i18next.exists.call(this.i18next, key, options);
    }
    getFixedT(lng, ns, keyPrefix) {
        return this.i18next.getFixedT.call(this.i18next, lng, ns, keyPrefix);
    }
    setDefaultNamespace(ns) {
        this.i18next.setDefaultNamespace.call(this.i18next, ns);
    }
    dir(lng) {
        return this.i18next.dir.call(this.i18next, lng);
    }
    changeLanguage(lng) {
        return new Promise((resolve, reject) => {
            return this.i18next.changeLanguage.call(this.i18next, lng, this.errorHandlingStrategy.handle(resolve, reject));
        });
    }
    loadNamespaces(namespaces) {
        return new Promise((resolve, reject) => {
            this.i18next.loadNamespaces.call(this.i18next, namespaces, this.errorHandlingStrategy.handle(resolve, reject));
        });
    }
    loadLanguages(lngs) {
        return new Promise((resolve, reject) => {
            this.i18next.loadLanguages.call(this.i18next, lngs, this.errorHandlingStrategy.handle(resolve, reject));
        });
    }
    //#region resource handling
    loadResources(callback) {
        this.i18next.loadResources.call(this.i18next, callback);
    }
    getDataByLanguage(lng) {
        return this.i18next.getDataByLanguage.call(this.i18next, lng);
    }
    async reloadResources(...params) {
        await this.i18next.reloadResources.apply(this.i18next, params);
    }
    getResource(lng, ns, key, options) {
        return this.i18next.getResource.call(this.i18next, lng, ns, key, options);
    }
    addResource(lng, ns, key, value, options) {
        return this.i18next.addResource.call(this.i18next, lng, ns, key, value, options);
    }
    addResources(lng, ns, resources) {
        return this.i18next.addResources.call(this.i18next, lng, ns, resources);
    }
    addResourceBundle(lng, ns, resources, deep, overwrite) {
        return this.i18next.addResourceBundle.call(this.i18next, lng, ns, resources, deep, overwrite);
    }
    hasResourceBundle(lng, ns) {
        return this.i18next.hasResourceBundle.call(this.i18next, lng, ns);
    }
    getResourceBundle(lng, ns) {
        return this.i18next.getResourceBundle.call(this.i18next, lng, ns);
    }
    removeResourceBundle(lng, ns) {
        return this.i18next.removeResourceBundle.call(this.i18next, lng, ns);
    }
    //#endregion
    subscribeEvents() {
        this.i18next.on.call(this.i18next, 'initialized', (options) => {
            this.events.initialized.next(options);
        });
        this.i18next.on.call(this.i18next, 'loaded', (loaded) => this.events.loaded.next(loaded));
        this.i18next.on.call(this.i18next, 'failedLoading', (lng, ns, msg) => this.events.failedLoading.next({ lng, ns, msg }));
        this.i18next.on.call(this.i18next, 'languageChanged', (lng) => {
            this.events.languageChanged.next(lng);
        });
        this.i18next.on.call(this.i18next, 'missingKey', (lngs, namespace, key, res) => this.events.missingKey.next({ lngs, namespace, key, res }));
        this.i18next.on.call(this.i18next, 'added', (lng, ns) => this.events.added.next({ lng, ns }));
        this.i18next.on.call(this.i18next, 'removed', (lng, ns) => this.events.removed.next({ lng, ns }));
    }
}
I18NextService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "14.2.10", ngImport: i0, type: I18NextService, deps: [{ token: I18NEXT_ERROR_HANDLING_STRATEGY }, { token: I18NEXT_INSTANCE, optional: true }], target: i0.ɵɵFactoryTarget.Injectable });
I18NextService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "14.2.10", ngImport: i0, type: I18NextService });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.2.10", ngImport: i0, type: I18NextService, decorators: [{
            type: Injectable
        }], ctorParameters: function () { return [{ type: undefined, decorators: [{
                    type: Inject,
                    args: [I18NEXT_ERROR_HANDLING_STRATEGY]
                }] }, { type: undefined, decorators: [{
                    type: Optional
                }, {
                    type: Inject,
                    args: [I18NEXT_INSTANCE]
                }] }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSTE4TmV4dFNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvbGliL0kxOE5leHRTZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUM3RCxPQUFPLEtBQUssSUFBSSxNQUFNLFNBQVMsQ0FBQztBQUVoQyxPQUFPLEVBQUUsK0JBQStCLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUVyRixPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0saUJBQWlCLENBQUM7O0FBTWhELE1BQU0sYUFBYSxHQUFjLElBQUksQ0FBQyxPQUFPLENBQUM7QUFHOUMsTUFBTSxPQUFPLGNBQWM7SUFtQ3pCLFlBRVUscUJBQW1ELEVBQ3JCLGVBQTJCO1FBRHpELDBCQUFxQixHQUFyQixxQkFBcUIsQ0FBOEI7UUFqQzdELFdBQU0sR0FBdUIsSUFBSSxhQUFhLEVBQUUsQ0FBQztRQW9DL0MsSUFBSSxDQUFDLE9BQU8sR0FBRyxlQUFlLElBQUksYUFBYSxDQUFDO0lBQ2xELENBQUM7SUFuQ0QsSUFBSSxRQUFRO1FBQ1YsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQztJQUMvQixDQUFDO0lBQ0QsSUFBSSxTQUFTO1FBQ1gsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQztJQUNoQyxDQUFDO0lBRUQsSUFBSSxPQUFPO1FBQ1QsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQztJQUM5QixDQUFDO0lBRUQsSUFBSSxPQUFPO1FBQ1QsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQztJQUM5QixDQUFDO0lBQ0QsSUFBSSxRQUFRO1FBQ1YsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQztJQUMvQixDQUFDO0lBQ0QsSUFBSSxLQUFLO1FBQ1AsT0FB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RW5CLGdCQUFnQjtnSEF0QzNCLGNBQWM7NEZBQWQsY0FBYztrQkFEMUIsVUFBVTs7MEJBcUNOLE1BQU07MkJBQUMsK0JBQStCOzswQkFFdEMsUUFBUTs7MEJBQUksTUFBTTsyQkFBQyxnQkFBZ0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3QsIEluamVjdGFibGUsIE9wdGlvbmFsIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCAqIGFzIGkxOG4gZnJvbSAnaTE4bmV4dCc7XHJcblxyXG5pbXBvcnQgeyBJMThORVhUX0VSUk9SX0hBTkRMSU5HX1NUUkFURUdZLCBJMThORVhUX0lOU1RBTkNFIH0gZnJvbSAnLi9JMThORVhUX1RPS0VOUyc7XHJcbmltcG9ydCB7IEkxOE5leHRFcnJvckhhbmRsaW5nU3RyYXRlZ3kgfSBmcm9tICcuL0kxOE5leHRFcnJvckhhbmRsaW5nU3RyYXRlZ2llcyc7XHJcbmltcG9ydCB7IEkxOE5leHRFdmVudHMgfSBmcm9tICcuL0kxOE5leHRFdmVudHMnO1xyXG5pbXBvcnQgeyBJMThOZXh0TG9hZFJlc3VsdCB9IGZyb20gJy4vSTE4TmV4dExvYWRSZXN1bHQnO1xyXG5pbXBvcnQgeyBJVHJhbnNsYXRpb25FdmVudHMgfSBmcm9tICcuL0lUcmFuc2xhdGlvbkV2ZW50cyc7XHJcbmltcG9ydCB7IElUcmFuc2xhdGlvblNlcnZpY2UgfSBmcm9tICcuL0lUcmFuc2xhdGlvblNlcnZpY2UnO1xyXG5cclxuXHJcbmNvbnN0IGkxOG5leHRHbG9iYWw6IGkxOG4uaTE4biA9IGkxOG4uZGVmYXVsdDtcclxuXHJcbkBJbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIEkxOE5leHRTZXJ2aWNlIGltcGxlbWVudHMgSVRyYW5zbGF0aW9uU2VydmljZSB7XHJcblxyXG4gIHByaXZhdGUgcmVhZG9ubHkgaTE4bmV4dDogaTE4bi5pMThuO1xyXG5cclxuICBldmVudHM6IElUcmFuc2xhdGlvbkV2ZW50cyA9IG5ldyBJMThOZXh0RXZlbnRzKCk7XHJcblxyXG4gIGdldCBsYW5ndWFnZSgpIHtcclxuICAgIHJldHVybiB0aGlzLmkxOG5leHQubGFuZ3VhZ2U7XHJcbiAgfVxyXG4gIGdldCBsYW5ndWFnZXMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5pMThuZXh0Lmxhbmd1YWdlcztcclxuICB9XHJcblxyXG4gIGdldCBvcHRpb25zKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuaTE4bmV4dC5vcHRpb25zO1xyXG4gIH1cclxuXHJcbiAgZ2V0IG1vZHVsZXMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5pMThuZXh0Lm1vZHVsZXM7XHJcbiAgfVxyXG4gIGdldCBzZXJ2aWNlcygpIHtcclxuICAgIHJldHVybiB0aGlzLmkxOG5leHQuc2VydmljZXM7XHJcbiAgfVxyXG4gIGdldCBzdG9yZSgpIHtcclxuICAgIHJldHVybiB0aGlzLmkxOG5leHQuc3RvcmU7XHJcbiAgfVxyXG5cclxuICBnZXQgcmVzb2x2ZWRMYW5ndWFnZSgpIHtcclxuICAgIHJldHVybiB0aGlzLmkxOG5leHQucmVzb2x2ZWRMYW5ndWFnZTtcclxuICB9XHJcblxyXG4gIGdldCBpc0luaXRpYWxpemVkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuaTE4bmV4dC5pc0luaXRpYWxpemVkO1xyXG4gIH1cclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBASW5qZWN0KEkxOE5FWFRfRVJST1JfSEFORExJTkdfU1RSQVRFR1kpXHJcbiAgICBwcml2YXRlIGVycm9ySGFuZGxpbmdTdHJhdGVneTogSTE4TmV4dEVycm9ySGFuZGxpbmdTdHJhdGVneSxcclxuICAgIEBPcHRpb25hbCgpIEBJbmplY3QoSTE4TkVYVF9JTlNUQU5DRSkgaTE4bmV4dEluc3RhbmNlPzogaTE4bi5pMThuXHJcbiAgKSB7XHJcbiAgICB0aGlzLmkxOG5leHQgPSBpMThuZXh0SW5zdGFuY2UgPz8gaTE4bmV4dEdsb2JhbDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyB1c2U8VCBleHRlbmRzIGkxOG4uTW9kdWxlPihcclxuICAgIG1vZHVsZTpcclxuICAgIFQgfCBpMThuLk5ld2FibGVNb2R1bGU8VD4gfCBpMThuLk5ld2FibGU8VD5cclxuICApOiBJVHJhbnNsYXRpb25TZXJ2aWNlIHtcclxuICAgIHRoaXMuaTE4bmV4dC51c2UuY2FsbCh0aGlzLmkxOG5leHQsIG1vZHVsZSk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIGluaXQob3B0aW9uczogaTE4bi5Jbml0T3B0aW9ucyk6IFByb21pc2U8STE4TmV4dExvYWRSZXN1bHQ+IHtcclxuICAgIHRoaXMuc3Vic2NyaWJlRXZlbnRzKCk7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPEkxOE5leHRMb2FkUmVzdWx0PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIHRoaXMuaTE4bmV4dC5pbml0LmNhbGwoXHJcbiAgICAgICAgdGhpcy5pMThuZXh0LFxyXG4gICAgICAgIE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMgPz8ge30pLFxyXG4gICAgICAgIHRoaXMuZXJyb3JIYW5kbGluZ1N0cmF0ZWd5LmhhbmRsZShyZXNvbHZlLCByZWplY3QpXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHQoXHJcbiAgICBrZXk6IHN0cmluZyB8IHN0cmluZ1tdLFxyXG4gICAgb3B0aW9uc09yRGVmYXVsdD86IHN0cmluZyB8IGkxOG4uVE9wdGlvbnMsXHJcbiAgICBvcHRpb25zPzogaTE4bi5UT3B0aW9uc1xyXG4gICk6IGkxOG4uVEZ1bmN0aW9uUmVzdWx0IHtcclxuICAgIGNvbnN0IGhhc0RlZmF1bHQgPSBvcHRpb25zT3JEZWZhdWx0ICYmIHR5cGVvZiBvcHRpb25zT3JEZWZhdWx0ID09PSAnc3RyaW5nJztcclxuICAgIGlmIChoYXNEZWZhdWx0KSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmkxOG5leHQudC5jYWxsKHRoaXMuaTE4bmV4dCwga2V5LCBvcHRpb25zT3JEZWZhdWx0LCBvcHRpb25zKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmkxOG5leHQudC5jYWxsKHRoaXMuaTE4bmV4dCwga2V5LCA8c3RyaW5nIHwgdW5kZWZpbmVkPm9wdGlvbnNPckRlZmF1bHQsIHVuZGVmaW5lZCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZm9ybWF0KHZhbHVlOiBhbnksIGZvcm1hdD86IHN0cmluZywgbG5nPzogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLmkxOG5leHQuZm9ybWF0LmNhbGwodGhpcy5pMThuZXh0LCB2YWx1ZSwgZm9ybWF0LCBsbmcsIHt9KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBleGlzdHMoa2V5OiBzdHJpbmcgfCBzdHJpbmdbXSwgb3B0aW9uczogYW55KSB7XHJcbiAgICByZXR1cm4gdGhpcy5pMThuZXh0LmV4aXN0cy5jYWxsKHRoaXMuaTE4bmV4dCwga2V5LCBvcHRpb25zKTtcclxuICB9XHJcblxyXG4gIGdldEZpeGVkVChsbmc6IHN0cmluZyB8IHJlYWRvbmx5IHN0cmluZ1tdLCBucz86IHN0cmluZyB8IHJlYWRvbmx5IHN0cmluZ1tdLCBrZXlQcmVmaXg/OiBzdHJpbmcpOiBpMThuLlRGdW5jdGlvbjtcclxuICBnZXRGaXhlZFQobG5nOiBudWxsLCBuczogc3RyaW5nIHwgcmVhZG9ubHkgc3RyaW5nW10gfCBudWxsLCBrZXlQcmVmaXg/OiBzdHJpbmcpOiBpMThuLlRGdW5jdGlvbjtcclxuICBnZXRGaXhlZFQobG5nOiBhbnksIG5zPzogYW55LCBrZXlQcmVmaXg/OiBhbnkpOiBpMThuLlRGdW5jdGlvbiB7XHJcbiAgICByZXR1cm4gdGhpcy5pMThuZXh0LmdldEZpeGVkVC5jYWxsKHRoaXMuaTE4bmV4dCwgbG5nLCBucywga2V5UHJlZml4KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXREZWZhdWx0TmFtZXNwYWNlKG5zOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuaTE4bmV4dC5zZXREZWZhdWx0TmFtZXNwYWNlLmNhbGwodGhpcy5pMThuZXh0LCBucyk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZGlyKGxuZz86IHN0cmluZykge1xyXG4gICAgcmV0dXJuIHRoaXMuaTE4bmV4dC5kaXIuY2FsbCh0aGlzLmkxOG5leHQsIGxuZyk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgY2hhbmdlTGFuZ3VhZ2UobG5nOiBzdHJpbmcpOiBQcm9taXNlPGkxOG4uVEZ1bmN0aW9uPiB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2U8aTE4bi5URnVuY3Rpb24+KFxyXG4gICAgICAoXHJcbiAgICAgICAgcmVzb2x2ZTogKHRoZW5hYmxlT3JSZXN1bHQ6IGkxOG4uVEZ1bmN0aW9uIHwgUHJvbWlzZUxpa2U8aTE4bi5URnVuY3Rpb24+KSA9PiB2b2lkLFxyXG4gICAgICAgIHJlamVjdDogKGVycm9yOiBhbnkpID0+IHZvaWRcclxuICAgICAgKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaTE4bmV4dC5jaGFuZ2VMYW5ndWFnZS5jYWxsKFxyXG4gICAgICAgICAgdGhpcy5pMThuZXh0LFxyXG4gICAgICAgICAgbG5nLFxyXG4gICAgICAgICAgdGhpcy5lcnJvckhhbmRsaW5nU3RyYXRlZ3kuaGFuZGxlKHJlc29sdmUsIHJlamVjdClcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGxvYWROYW1lc3BhY2VzKG5hbWVzcGFjZXM6IHN0cmluZyB8IHN0cmluZ1tdKTogUHJvbWlzZTxhbnk+IHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxJMThOZXh0TG9hZFJlc3VsdD4oXHJcbiAgICAgIChcclxuICAgICAgICByZXNvbHZlOiAodGhlbmFibGVPclJlc3VsdDogSTE4TmV4dExvYWRSZXN1bHQgfCBQcm9taXNlTGlrZTxJMThOZXh0TG9hZFJlc3VsdD4pID0+IHZvaWQsXHJcbiAgICAgICAgcmVqZWN0OiAoZXJyb3I6IGFueSkgPT4gdm9pZFxyXG4gICAgICApID0+IHtcclxuICAgICAgICB0aGlzLmkxOG5leHQubG9hZE5hbWVzcGFjZXMuY2FsbChcclxuICAgICAgICAgIHRoaXMuaTE4bmV4dCxcclxuICAgICAgICAgIG5hbWVzcGFjZXMsXHJcbiAgICAgICAgICB0aGlzLmVycm9ySGFuZGxpbmdTdHJhdGVneS5oYW5kbGUocmVzb2x2ZSwgcmVqZWN0KVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgbG9hZExhbmd1YWdlcyhsbmdzOiBzdHJpbmcgfCBzdHJpbmdbXSkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KFxyXG4gICAgICAoXHJcbiAgICAgICAgcmVzb2x2ZTogKHRoZW5hYmxlT3JSZXN1bHQ6IHZvaWQgfCBQcm9taXNlTGlrZTx2b2lkPikgPT4gdm9pZCxcclxuICAgICAgICByZWplY3Q6IChlcnJvcjogYW55KSA9PiB2b2lkXHJcbiAgICAgICkgPT4ge1xyXG4gICAgICAgIHRoaXMuaTE4bmV4dC5sb2FkTGFuZ3VhZ2VzLmNhbGwoXHJcbiAgICAgICAgICB0aGlzLmkxOG5leHQsXHJcbiAgICAgICAgICBsbmdzLFxyXG4gICAgICAgICAgdGhpcy5lcnJvckhhbmRsaW5nU3RyYXRlZ3kuaGFuZGxlKHJlc29sdmUsIHJlamVjdClcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy8jcmVnaW9uIHJlc291cmNlIGhhbmRsaW5nXHJcblxyXG4gIHB1YmxpYyBsb2FkUmVzb3VyY2VzKGNhbGxiYWNrPzogKGVycjogYW55KSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICB0aGlzLmkxOG5leHQubG9hZFJlc291cmNlcy5jYWxsKHRoaXMuaTE4bmV4dCwgY2FsbGJhY2spO1xyXG4gIH1cclxuICBwdWJsaWMgZ2V0RGF0YUJ5TGFuZ3VhZ2UobG5nOiBzdHJpbmcpIHtcclxuICAgIHJldHVybiB0aGlzLmkxOG5leHQuZ2V0RGF0YUJ5TGFuZ3VhZ2UuY2FsbCh0aGlzLmkxOG5leHQsIGxuZyk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYXN5bmMgcmVsb2FkUmVzb3VyY2VzKC4uLnBhcmFtczogYW55KSB7XHJcbiAgICBhd2FpdCB0aGlzLmkxOG5leHQucmVsb2FkUmVzb3VyY2VzLmFwcGx5KHRoaXMuaTE4bmV4dCwgcGFyYW1zKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRSZXNvdXJjZShsbmc6IHN0cmluZywgbnM6IHN0cmluZywga2V5OiBzdHJpbmcsIG9wdGlvbnM6IGFueSkge1xyXG4gICAgcmV0dXJuIHRoaXMuaTE4bmV4dC5nZXRSZXNvdXJjZS5jYWxsKHRoaXMuaTE4bmV4dCwgbG5nLCBucywga2V5LCBvcHRpb25zKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhZGRSZXNvdXJjZShsbmc6IHN0cmluZywgbnM6IHN0cmluZywga2V5OiBzdHJpbmcsIHZhbHVlOiBhbnksIG9wdGlvbnM6IGFueSk6IGkxOG4uaTE4biB7XHJcbiAgICByZXR1cm4gdGhpcy5pMThuZXh0LmFkZFJlc291cmNlLmNhbGwodGhpcy5pMThuZXh0LCBsbmcsIG5zLCBrZXksIHZhbHVlLCBvcHRpb25zKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhZGRSZXNvdXJjZXMobG5nOiBzdHJpbmcsIG5zOiBzdHJpbmcsIHJlc291cmNlczogYW55KTogaTE4bi5pMThuIHtcclxuICAgIHJldHVybiB0aGlzLmkxOG5leHQuYWRkUmVzb3VyY2VzLmNhbGwodGhpcy5pMThuZXh0LCBsbmcsIG5zLCByZXNvdXJjZXMpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGFkZFJlc291cmNlQnVuZGxlKGxuZzogc3RyaW5nLCBuczogc3RyaW5nLCByZXNvdXJjZXM6IGFueSwgZGVlcDogYW55LCBvdmVyd3JpdGU6IGFueSk6IGkxOG4uaTE4biB7XHJcbiAgICByZXR1cm4gdGhpcy5pMThuZXh0LmFkZFJlc291cmNlQnVuZGxlLmNhbGwoXHJcbiAgICAgIHRoaXMuaTE4bmV4dCxcclxuICAgICAgbG5nLFxyXG4gICAgICBucyxcclxuICAgICAgcmVzb3VyY2VzLFxyXG4gICAgICBkZWVwLFxyXG4gICAgICBvdmVyd3JpdGVcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgaGFzUmVzb3VyY2VCdW5kbGUobG5nOiBzdHJpbmcsIG5zOiBzdHJpbmcpIHtcclxuICAgIHJldHVybiB0aGlzLmkxOG5leHQuaGFzUmVzb3VyY2VCdW5kbGUuY2FsbCh0aGlzLmkxOG5leHQsIGxuZywgbnMpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldFJlc291cmNlQnVuZGxlKGxuZzogc3RyaW5nLCBuczogc3RyaW5nKSB7XHJcbiAgICByZXR1cm4gdGhpcy5pMThuZXh0LmdldFJlc291cmNlQnVuZGxlLmNhbGwodGhpcy5pMThuZXh0LCBsbmcsIG5zKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyByZW1vdmVSZXNvdXJjZUJ1bmRsZShsbmc6IHN0cmluZywgbnM6IHN0cmluZyk6IGkxOG4uaTE4biB7XHJcbiAgICByZXR1cm4gdGhpcy5pMThuZXh0LnJlbW92ZVJlc291cmNlQnVuZGxlLmNhbGwodGhpcy5pMThuZXh0LCBsbmcsIG5zKTtcclxuICB9XHJcblxyXG4gIC8vI2VuZHJlZ2lvblxyXG5cclxuICBwcml2YXRlIHN1YnNjcmliZUV2ZW50cygpIHtcclxuICAgIHRoaXMuaTE4bmV4dC5vbi5jYWxsKHRoaXMuaTE4bmV4dCwgJ2luaXRpYWxpemVkJywgKG9wdGlvbnM6IGFueSkgPT4ge1xyXG4gICAgICB0aGlzLmV2ZW50cy5pbml0aWFsaXplZC5uZXh0KG9wdGlvbnMpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLmkxOG5leHQub24uY2FsbCh0aGlzLmkxOG5leHQsICdsb2FkZWQnLCAobG9hZGVkOiBib29sZWFuKSA9PlxyXG4gICAgICB0aGlzLmV2ZW50cy5sb2FkZWQubmV4dChsb2FkZWQpXHJcbiAgICApO1xyXG4gICAgdGhpcy5pMThuZXh0Lm9uLmNhbGwodGhpcy5pMThuZXh0LCAnZmFpbGVkTG9hZGluZycsIChsbmc6IHN0cmluZywgbnM6IHN0cmluZywgbXNnOiBzdHJpbmcpID0+XHJcbiAgICAgIHRoaXMuZXZlbnRzLmZhaWxlZExvYWRpbmcubmV4dCh7IGxuZywgbnMsIG1zZyB9KVxyXG4gICAgKTtcclxuICAgIHRoaXMuaTE4bmV4dC5vbi5jYWxsKHRoaXMuaTE4bmV4dCwgJ2xhbmd1YWdlQ2hhbmdlZCcsIChsbmc6IHN0cmluZykgPT4ge1xyXG4gICAgICB0aGlzLmV2ZW50cy5sYW5ndWFnZUNoYW5nZWQubmV4dChsbmcpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLmkxOG5leHQub24uY2FsbCh0aGlzLmkxOG5leHQsICdtaXNzaW5nS2V5JywgKGxuZ3M6IHN0cmluZywgbmFtZXNwYWNlOiBzdHJpbmcsIGtleTogc3RyaW5nLCByZXM6IGFueSkgPT5cclxuICAgICAgdGhpcy5ldmVudHMubWlzc2luZ0tleS5uZXh0KHsgbG5ncywgbmFtZXNwYWNlLCBrZXksIHJlcyB9KVxyXG4gICAgKTtcclxuICAgIHRoaXMuaTE4bmV4dC5vbi5jYWxsKHRoaXMuaTE4bmV4dCwgJ2FkZGVkJywgKGxuZzogc3RyaW5nLCBuczogc3RyaW5nKSA9PlxyXG4gICAgICB0aGlzLmV2ZW50cy5hZGRlZC5uZXh0KHsgbG5nLCBucyB9KVxyXG4gICAgKTtcclxuICAgIHRoaXMuaTE4bmV4dC5vbi5jYWxsKHRoaXMuaTE4bmV4dCwgJ3JlbW92ZWQnLCAobG5nOiBzdHJpbmcsIG5zOiBzdHJpbmcpID0+XHJcbiAgICAgIHRoaXMuZXZlbnRzLnJlbW92ZWQubmV4dCh7IGxuZywgbnMgfSlcclxuICAgICk7XHJcbiAgfVxyXG59XHJcbiJdfQ==